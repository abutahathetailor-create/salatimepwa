<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Salah Times - Jubail</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìø</text></svg>">
	<link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìø</text></svg>" type="image/svg+xml">
	
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
            --safe-area-inset-left: env(safe-area-inset-left, 0px);
            --safe-area-inset-right: env(safe-area-inset-right, 0px);
        }

        body {
            background: linear-gradient(135deg, #1a5e63 0%, #0d2a35 100%);
            color: #fff;
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            padding-top: var(--safe-area-inset-top);
            padding-bottom: var(--safe-area-inset-bottom);
            padding-left: var(--safe-area-inset-left);
            padding-right: var(--safe-area-inset-right);
        }

        .container {
            max-width: 500px;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 0;
            box-shadow: 0 0 0 rgba(0, 0, 0, 0);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 20px;
            padding-top: max(15px, var(--safe-area-inset-top));
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .header h1 i {
            color: #4CAF50;
        }

        .date-display {
            font-size: 1rem;
            color: #b0e6ff;
            margin-bottom: 3px;
        }

        .hijri-date {
            font-size: 0.9rem;
            color: #ffd54f;
        }

        .location {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 1rem;
        }

        .location i {
            color: #FF9800;
        }

        .content {
            padding: 15px 20px;
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .current-time {
            text-align: center;
            font-size: 1.4rem;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .current-time i {
            color: #4CAF50;
        }

        .countdown {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .countdown-title {
            font-size: 1rem;
            margin-bottom: 8px;
            color: #FF9800;
        }

        .countdown-timer {
            font-size: 1.6rem;
            font-weight: 700;
            color: #4CAF50;
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 15px;
            flex: 1;
            overflow: hidden;
        }

        .prayer-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 12px;
            text-align: center;
            transition: transform 0.3s ease, background 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 0;
        }

        .prayer-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .prayer-card.active {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid rgba(76, 175, 80, 0.5);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
        }

        .prayer-card.next {
            background: rgba(255, 152, 0, 0.3);
            border: 1px solid rgba(255, 152, 0, 0.5);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.2);
        }

        .prayer-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            justify-content: flex-start;  /* ‚Üê Changed to flex-start */
            gap: 6px;
            flex-shrink: 0;
        }

        .prayer-time {
            font-size: 1.3rem;
            font-weight: 700;
            color: #b0e6ff;
            flex-shrink: 0;
			text-align: left;  /* ‚Üê Add this line */
        }

        .prayer-card.active .prayer-time {
            color: #4CAF50;
        }

        .prayer-card.next .prayer-time {
            color: #FF9800;
        }

        .footer {
            text-align: center;
            padding: 12px 20px;
            padding-bottom: max(12px, var(--safe-area-inset-bottom));
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.8rem;
            color: #aaa;
            flex-shrink: 0;
        }

        .loading {
            text-align: center;
            padding: 30px;
            font-size: 1rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        .loading i {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #4CAF50;
        }

        .error-message {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.5);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            margin-bottom: 15px;
            color: #ffcdd2;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .retry-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 8px;
            transition: background 0.3s;
        }

        .retry-button:hover {
            background: #45a049;
        }

        /* Ensure no scrolling and proper mobile layout */
        html, body {
            overflow: hidden;
            height: 100vh;
            height: 100dvh;
        }

        /* Mobile-specific optimizations */
        @media (max-width: 400px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            .prayer-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .current-time {
                font-size: 1.2rem;
            }
            
            .countdown-timer {
                font-size: 1.4rem;
            }
            
            .prayer-time {
                font-size: 1.2rem;
            }
        }

        @media (max-height: 700px) {
            .header {
                padding: 12px 15px;
                padding-top: max(12px, var(--safe-area-inset-top));
            }
            
            .content {
                padding: 12px 15px;
            }
            
            .current-time {
                font-size: 1.2rem;
                padding: 10px;
                margin-bottom: 12px;
            }
            
            .countdown {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .countdown-timer {
                font-size: 1.4rem;
            }
            
            .prayer-grid {
                gap: 10px;
            }
            
            .prayer-card {
                padding: 12px 10px;
            }
            
            .prayer-time {
                font-size: 1.2rem;
            }
        }

        @media (max-height: 600px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .date-display {
                font-size: 0.9rem;
            }
            
            .hijri-date {
                font-size: 0.8rem;
            }
            
            .location {
                font-size: 0.9rem;
            }
            
            .current-time {
                font-size: 1.1rem;
                margin-bottom: 10px;
            }
            
            .countdown-title {
                font-size: 0.9rem;
            }
            
            .countdown-timer {
                font-size: 1.3rem;
            }
            
            .prayer-name {
                font-size: 0.9rem;
            }
            
            .prayer-time {
                font-size: 1.1rem;
            }
        }

        /* Very small screens */
        @media (max-height: 500px) {
            .header {
                padding: 8px 12px;
                padding-top: max(8px, var(--safe-area-inset-top));
            }
            
            .header h1 {
                font-size: 1.3rem;
                margin-bottom: 5px;
            }
            
            .date-display, .hijri-date, .location {
                font-size: 0.8rem;
            }
            
            .content {
                padding: 8px 12px;
            }
            
            .current-time {
                font-size: 1rem;
                padding: 8px;
                margin-bottom: 8px;
            }
            
            .countdown {
                padding: 8px;
                margin-bottom: 8px;
            }
            
            .countdown-title {
                font-size: 0.8rem;
                margin-bottom: 5px;
            }
            
            .countdown-timer {
                font-size: 1.1rem;
            }
            
            .prayer-grid {
                gap: 8px;
            }
            
            .prayer-card {
                padding: 8px 6px;
            }
            
            .prayer-name {
                font-size: 0.8rem;
                margin-bottom: 4px;
            }
            
            .prayer-time {
                font-size: 1rem;
            }
            
            .footer {
                padding: 8px 12px;
                padding-bottom: max(8px, var(--safe-area-inset-bottom));
                font-size: 0.7rem;
            }
        }
		/* After your existing .prayer-name styles */
		.prayer-names {
			text-align: left;
		}

		.prayer-arabic {
			font-size: 1rem;
			font-weight: 600;
			margin-bottom: 2px;
		}

		.prayer-english {
			font-size: 0.8rem;
			color: #b0e6ff;
			opacity: 0.8;
		}
		.fajr-names {
			text-align: right;
			width: 100%;
		}

		.fajr-names .prayer-arabic {
			font-size: 1rem;
			font-weight: 600;
			margin-bottom: 2px;
		}

		.fajr-names .prayer-english {
			font-size: 0.8rem;
			color: #b0e6ff;
			opacity: 0.8;
			text-align: center;
		}
	</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-mosque"></i> Salah Times</h1>
            <div class="date-display" id="currentDate">Loading...</div>
            <div class="hijri-date" id="hijriDate">Loading...</div>
            <div class="location">
                <i class="fas fa-map-marker-alt"></i>
                <span>Jubail, Saudi Arabia</span>
            </div>
        </div>
        
        <div class="content">
            <div id="errorMessage" style="display: none;"></div>
            
            <div class="current-time">
                <i class="fas fa-clock"></i>
                <span id="currentTime">Loading...</span>
            </div>
            
            <div class="countdown">
                <div class="countdown-title" id="countdownTitle">Next Prayer In:</div>
                <div class="countdown-timer" id="countdownTimer">--:--:--</div>
            </div>
            
            <div class="prayer-grid" id="prayerGrid">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>Loading prayer times...</div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Prayer times for Jubail, Saudi Arabia | Data from Aladhan API</p>
        </div>
    </div>

    <script>
        // Jubail coordinates
        const JUBAIL_LAT = 27.0040;
        const JUBAIL_LNG = 49.6460;

		// Arabic prayer names - ADD THIS NEW OBJECT
		const prayerArabicNames = {
			Fajr: "ÿßŸÑŸÅÿ¨ÿ±",
			Sunrise: "ÿßŸÑÿ¥ÿ±ŸàŸÇ", 
			Dhuhr: "ÿßŸÑÿ∏Ÿáÿ±",
			Asr: "ÿßŸÑÿπÿµÿ±", 
			Maghrib: "ÿßŸÑŸÖÿ∫ÿ±ÿ®", 
			Isha: "ÿßŸÑÿπÿ¥ÿßÿ°"
		};

     
        // DOM Elements
        const currentDateEl = document.getElementById('currentDate');
        const hijriDateEl = document.getElementById('hijriDate');
        const currentTimeEl = document.getElementById('currentTime');
        const countdownTitleEl = document.getElementById('countdownTitle');
        const countdownTimerEl = document.getElementById('countdownTimer');
        const prayerGridEl = document.getElementById('prayerGrid');
        const errorMessageEl = document.getElementById('errorMessage');
        
        // Prayer times data
        let prayerTimes = {};
        let activePrayer = '';
        let nextPrayer = '';
        let apiAttempts = 0;
        const MAX_API_ATTEMPTS = 2;
        
        // Update current time
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: true 
            });
            currentTimeEl.textContent = timeString;
            
            // Update date once a day
            if (!currentDateEl.textContent.includes(now.toLocaleDateString())) {
                updateDateInfo(now);
            }
        }
        
        // Update date information
        function updateDateInfo(date) {
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            currentDateEl.textContent = date.toLocaleDateString('en-US', options);
        }
        
        // Show error message
        function showError(message) {
            errorMessageEl.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>${message}</div>
                    <button class="retry-button" onclick="retryLoadPrayerTimes()">
                        <i class="fas fa-redo"></i> Retry
                    </button>
                </div>
            `;
            errorMessageEl.style.display = 'block';
        }
        
        // Hide error message
        function hideError() {
            errorMessageEl.style.display = 'none';
        }
        
        // Retry loading prayer times
        function retryLoadPrayerTimes() {
            hideError();
            apiAttempts = 0;
            initPrayerTimes();
        }
        
        // Fetch prayer times from API with multiple fallback methods
        async function fetchPrayerTimes() {
            const today = new Date();
            const dateString = `${today.getDate()}-${today.getMonth()+1}-${today.getFullYear()}`;
            
            // Try different API endpoints and methods
            const apiEndpoints = [
                // Direct API call
                `https://api.aladhan.com/v1/timings/${dateString}?latitude=${JUBAIL_LAT}&longitude=${JUBAIL_LNG}&method=4`,
                // With CORS proxy
                `https://corsproxy.io/?${encodeURIComponent(`https://api.aladhan.com/v1/timings/${dateString}?latitude=${JUBAIL_LAT}&longitude=${JUBAIL_LNG}&method=4`)}`,
                // Alternative CORS proxy
                `https://api.allorigins.win/raw?url=${encodeURIComponent(`https://api.aladhan.com/v1/timings/${dateString}?latitude=${JUBAIL_LAT}&longitude=${JUBAIL_LNG}&method=4`)}`
            ];
            
            for (let i = apiAttempts; i < apiEndpoints.length; i++) {
                try {
                    console.log(`Trying API endpoint ${i + 1}...`);
                    const response = await fetch(apiEndpoints[i], {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        mode: 'cors'
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('Successfully fetched prayer times');
                    return data.data;
                } catch (error) {
                    console.warn(`API attempt ${i + 1} failed:`, error);
                    if (i === apiEndpoints.length - 1) {
                        throw error;
                    }
                }
            }
            
            throw new Error('All API attempts failed');
        }
        
        // Get accurate prayer times for Jubail based on current date
        function getFallbackPrayerTimes() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            // Sample prayer times for Jubail (you can adjust these as needed)
            let times;
            
            if (month >= 3 && month <= 5) { // Spring
                times = {
                    Fajr: "04:15",
                    Sunrise: "05:35",
                    Dhuhr: "11:55",
                    Asr: "15:25",
                    Maghrib: "18:15",
                    Isha: "19:45"
                };
            } else if (month >= 6 && month <= 8) { // Summer
                times = {
                    Fajr: "03:45",
                    Sunrise: "05:05",
                    Dhuhr: "11:45",
                    Asr: "15:15",
                    Maghrib: "18:35",
                    Isha: "20:05"
                };
            } else if (month >= 9 && month <= 11) { // Autumn
                times = {
                    Fajr: "04:30",
                    Sunrise: "05:50",
                    Dhuhr: "11:50",
                    Asr: "15:10",
                    Maghrib: "17:55",
                    Isha: "19:25"
                };
            } else { // Winter
                times = {
                    Fajr: "04:55",
                    Sunrise: "06:15",
                    Dhuhr: "11:45",
                    Asr: "14:55",
                    Maghrib: "17:25",
                    Isha: "18:55"
                };
            }
            
            // Calculate Hijri date
            const hijriDay = (day + 10) % 30 || 30;
            const hijriMonths = ["Muharram", "Safar", "Rabi al-Awwal", "Rabi al-Thani", "Jumada al-Awwal", "Jumada al-Thani", "Rajab", "Sha'ban", "Ramadan", "Shawwal", "Dhu al-Qadah", "Dhu al-Hijjah"];
            const hijriMonth = hijriMonths[(month + 5) % 12];
            const hijriYear = 1445; // Approximate Hijri year
            
            return {
                timings: times,
                date: {
                    hijri: {
                        day: hijriDay,
                        month: { en: hijriMonth },
                        year: hijriYear.toString()
                    }
                }
            };
        }
        
        // Initialize prayer times
        async function initPrayerTimes() {
            try {
                apiAttempts++;
                hideError();
                
                let prayerData;
                if (apiAttempts <= MAX_API_ATTEMPTS) {
                    prayerData = await fetchPrayerTimes();
                } else {
                    throw new Error('Using fallback data after multiple attempts');
                }
                
                // Update Hijri date
                const hijri = prayerData.date.hijri;
                hijriDateEl.textContent = `${hijri.day} ${hijri.month.en} ${hijri.year} AH`;
                
                // Extract prayer times
                prayerTimes = {
                    Fajr: prayerData.timings.Fajr,
                    Sunrise: prayerData.timings.Sunrise,
                    Dhuhr: prayerData.timings.Dhuhr,
                    Asr: prayerData.timings.Asr,
                    Maghrib: prayerData.timings.Maghrib,
                    Isha: prayerData.timings.Isha
                };
                
                // Display prayer times
                displayPrayerTimes();
                
                // Start countdown
                updateCountdown();
                
            } catch (error) {
                console.error('Error loading prayer times:', error);
                
                // Use fallback data
                const fallbackData = getFallbackPrayerTimes();
                prayerTimes = {
                    Fajr: fallbackData.timings.Fajr,
                    Sunrise: fallbackData.timings.Sunrise,
                    Dhuhr: fallbackData.timings.Dhuhr,
                    Asr: fallbackData.timings.Asr,
                    Maghrib: fallbackData.timings.Maghrib,
                    Isha: fallbackData.timings.Isha
                };
                
                hijriDateEl.textContent = `${fallbackData.date.hijri.day} ${fallbackData.date.hijri.month.en} ${fallbackData.date.hijri.year} AH`;
                
                displayPrayerTimes();
                updateCountdown();
                
                showError(`Using approximate prayer times. ${error.message}`);
            }
        }

        // Format time to 12-hour format
        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const formattedHour = hour % 12 || 12;
            return `${formattedHour}:${minutes} ${ampm}`;
        }        
        // Display prayer times in the grid
		// Display prayer times in the grid
		function displayPrayerTimes() {
			const prayerIcons = {
				Fajr: "fas fa-star-and-crescent",
				Sunrise: "fas fa-sun",
				Dhuhr: "fas fa-sun",
				Asr: "fas fa-cloud-sun", 
				Maghrib: "fas fa-sun",
				Isha: "fas fa-moon"
			};
			
			prayerGridEl.innerHTML = '';
			
			Object.entries(prayerTimes).forEach(([prayerName, time]) => {
				const prayerCard = document.createElement('div');
				prayerCard.className = 'prayer-card';
				prayerCard.id = `prayer-${prayerName}`;
				
				if (prayerName === "Fajr" || prayerName === "Sunrise" || prayerName === "Dhuhr" || prayerName === "Asr" || prayerName === "Maghrib" || prayerName === "Isha")  {
					prayerCard.innerHTML = `
						<div class="prayer-name">
							<i class="${prayerIcons[prayerName]}"></i>
							<span>${prayerArabicNames[prayerName]} (${prayerName})</span>
						</div>
						<div class="prayer-time">${formatTime(time)}</div>
					`;
				} else {
					prayerCard.innerHTML = `
						<div class="prayer-name">
							<i class="${prayerIcons[prayerName]}"></i>
							<span>${prayerName}</span>
						</div>
						<div class="prayer-time">${formatTime(time)}</div>
					`;
				}
				
				prayerGridEl.appendChild(prayerCard);
			});
		}
        
        // Update countdown to next prayer
        function updateCountdown() {
            const now = new Date();
            const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            
            // Reset active prayer classes
            document.querySelectorAll('.prayer-card').forEach(card => {
                card.classList.remove('active', 'next');
            });
            
            // Find current and next prayer
            let nextPrayerName = '';
            let nextPrayerTime = null;
            let activePrayerName = '';
            
            Object.entries(prayerTimes).forEach(([prayer, time]) => {
                const [hours, minutes] = time.split(':');
                const prayerTime = parseInt(hours) * 3600 + parseInt(minutes) * 60;
                
                if (prayerTime <= currentTime) {
                    activePrayerName = prayer;
                } else if (!nextPrayerTime || prayerTime < nextPrayerTime) {
                    nextPrayerName = prayer;
                    nextPrayerTime = prayerTime;
                }
            });
            
            // If no next prayer found, use first prayer of next day
            if (!nextPrayerName) {
                nextPrayerName = 'Fajr';
                nextPrayerTime = 24 * 3600 + (parseInt(prayerTimes.Fajr.split(':')[0]) * 3600 + 
                              parseInt(prayerTimes.Fajr.split(':')[1]) * 60);
            }
            
            // Update UI
            if (activePrayerName) {
                const activeCard = document.getElementById(`prayer-${activePrayerName}`);
                if (activeCard) activeCard.classList.add('active');
            }
            
            const nextCard = document.getElementById(`prayer-${nextPrayerName}`);
            if (nextCard) nextCard.classList.add('next');
            
            // Calculate time difference
            let timeDiff = nextPrayerTime - currentTime;
            if (timeDiff < 0) timeDiff += 24 * 3600; // Add 24 hours if negative
            
            // Update countdown
            const hours = Math.floor(timeDiff / 3600);
            const minutes = Math.floor((timeDiff % 3600) / 60);
            const seconds = timeDiff % 60;
            
            countdownTitleEl.textContent = `Time until ${nextPrayerName}:`;
            countdownTimerEl.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update active and next prayer variables
            activePrayer = activePrayerName;
            nextPrayer = nextPrayerName;
        }
        
        // Initialize the app
        function initApp() {
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // Show fallback data immediately while API loads
            const fallbackData = getFallbackPrayerTimes();
            prayerTimes = fallbackData.timings;
            hijriDateEl.textContent = `${fallbackData.date.hijri.day} ${fallbackData.date.hijri.month.en} ${fallbackData.date.hijri.year} AH`;
            displayPrayerTimes();
            updateCountdown();
            
            // Then try to load from API
            setTimeout(() => {
                initPrayerTimes();
            }, 1000);
            
            setInterval(updateCountdown, 1000);
            
            // Update prayer times at midnight
            const now = new Date();
            const midnight = new Date(now);
            midnight.setHours(24, 0, 0, 0);
            const timeToMidnight = midnight - now;
            
            setTimeout(() => {
                initPrayerTimes();
                // Set daily update
                setInterval(initPrayerTimes, 24 * 60 * 60 * 1000);
            }, timeToMidnight);
        }
        
        // Start the app
        window.onload = initApp;
    </script>
</body>
</html>






